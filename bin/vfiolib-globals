#!/bin/bash sh

#
# Filename:         vfiolib-globals
# Description:      Commonly-used parameters.
# Author(s):        Alex Portell <github.com/portellam>
# Maintainer(s):    Alex Portell <github.com/portellam>
#

# <code>
    function GetUser
    {
        if [[ "$SUDO_USER" != "" ]]; then
            _USER="$SUDO_USER"
            return 0
        fi

        if [[ "$USER" != "" ]]; then
            _USER="$USER"
            return 0
        fi

        return 1
    }
# </code>

# <params>
    declare -g _USER="$USER"
    GetUser &> /dev/null

    # <summary>
    # Color coding
    # Reference URL: 'https://www.shellhacks.com/bash-colors'
    # </summary>
    declare -g _SET_COLOR_GREEN='\033[0;32m'
    declare -g _SET_COLOR_RED='\033[0;31m'
    declare -g _SET_COLOR_YELLOW='\033[0;33m'
    declare -g _RESET_COLOR='\033[0m'

    # <summary> Append output </summary>
    declare -g _PREFIX_NOTE="${_SET_COLOR_YELLOW}Note:$_RESET_COLOR"
    declare -g _PREFIX_ERROR="${_SET_COLOR_YELLOW}An error occurred:$_RESET_COLOR"
    declare -g _PREFIX_FAIL="${_SET_COLOR_RED}Failure:$_RESET_COLOR"
    declare -g _PREFIX_PASS="${_SET_COLOR_GREEN}Success:$_RESET_COLOR"
    declare -g _SUFFIX_FAIL="${_SET_COLOR_RED}[Failure]$_RESET_COLOR"
    declare -g _SUFFIX_PASS="${_SET_COLOR_GREEN}[Success]$_RESET_COLOR"
    declare -g _SUFFIX_SKIP="${_SET_COLOR_YELLOW}[Skipped]$_RESET_COLOR"

    # <remarks> File templates. </remarks>
    declare -ga _DISCLAIMER_FILE_CONTENTS=(
        "#### Generated by 'portellam/deploy-vfio-main'"
        "# WARNING: Any modifications to this file will be modified by 'deploy-vfio-main'"
        "#"
    )

    declare -ga _VFIO_DISCLAIMER_FILE_CONTENTS=(
        "${_DISCLAIMER_FILE_CONTENTS[@]}"
        "# Run lspci to view hardware information."
        "# You must run update-initramfs(8) to effect this change."
        "#"
    )

    # <remarks> Memory </remarks>
    declare -g _STR_MAX_MEMORY=$( cat /proc/meminfo | grep MemTotal | cut -d ":" -f 2 | cut -d "k" -f 1 )
    declare -gi _INT_MAX_MEMORY=${_STR_MAX_MEMORY## }
# </params>
